<div id="<%= dom_id recipe %>">
  <p>
    <h2 class="title is-2"><%= recipe.name %></h2>
  </p>
  <div class="box">
    <article class="media">
      <div class="media-content">
        <div class="content">
          <p>
            <strong>Preparation time:</strong>
            <%= recipe.preparation_time %>
          </p>
          <p>
            <strong>Cooking time:</strong>
            <%= recipe.cooking_time %>
          </p>
          <p><strong>Steps go here...</strong></p>
        </div>
        <br />
        <nav class="level">
          <div class="level-left is-mobile">
              <%= link_to recipe, class: "level-item" do %>
                <button class="button is-save is-outlined is-rounded is-responsive">Generate shopping list</button>
              <% end %>
          </div>
          <div class="level-right is-mobile">
              <!--%= link_to recipe_new_ingredient_path(recipe.id), class: "level-item", method: :get do %-->
              <%= link_to recipe_new_ingredient_path(recipe.id), class: "level-item", method: :get do %>
                <button class="button is-save is-outlined is-rounded is-responsive">Add ingredient</button>
              <% end %>
          </div>
        </nav>
      </div>
      <div class="media-right">
        <figure class="image is-64x64">
          <% if recipe.public %>
            <span>Public <img src=<%= image_path("toggle-on.svg") %> /></span>
          <% else %>
            <span>Public <img src=<%= image_path("toggle-off.svg") %> /></span>
          <% end %>
        </figure>
      </div>
    </article>
  </div>
  <hr />
  <div class="table-container">
    <table class="table is-bordered is-striped is-hoverable is-fullwidth">
      <thead class="thead">
        <tr>
          <th>Food</th>
          <th>Quantity</th>
          <th>Value</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <% recipe.recipe_foods.each do | recipe_food | %>
          <tr>
            <td><%= recipe_food.food.name %> <%= recipe_food.food.meadurement_unit %></td>
            <td><%= recipe_food.qty %></td>
            <td>$<%= recipe_food.qty*recipe_food.food.price%></td>
            <td>
              <% if can? :destroy, @recipe %>
                <%= link_to "Modify", edit_form_recipe_food_path(id: recipe_food.id), method: :delete, class: "level-item" do %>
                  <button class="button is-danger is-outlined is-rounded is-responsive">
                    <span><ion-icon name="trash"></ion-icon></span>
                  </button>
                <% end %>
                <%= link_to "Remove", delete_recipe_food_path(id: recipe_food.id), method: :delete, data: { turbo_method: :delete, turbo_confirm: 'Are you sure you want to delete this recipe-food?' }, class: "level-item" do %>
                  <button class="button is-danger is-outlined is-rounded is-responsive">
                    <span><ion-icon name="trash"></ion-icon></span>
                  </button>
                <% end %>
              <% else %>
                <span>No action is allowed for this recipe</span>
              <% end %>          
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
</div>
